{
	"info": {
		"_postman_id": "8c1d614e-5a0e-4666-bd24-c936fc56e9aa",
		"name": "BookMyApp",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "34455985"
	},
	"item": [
		{
			"name": "User",
			"item": [
				{
					"name": "Get Users",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status is code 200\",function(){\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response time is less than 800ms\",function(){\r",
									"    pm.expect(pm.response.responseTime).to.be.below(800)\r",
									"});\r",
									"\r",
									"pm.test(\"Response body contains array of users\", function(){\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.length).to.be.above(0)\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Post User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status is code 201 - user created successfully\",function(){\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"pm.test(\"Response time is less than 800ms\",function(){\r",
									"    pm.expect(pm.response.responseTime).to.be.below(800)\r",
									"});\r",
									"\r",
									"pm.test(\"Response contains the created user data\",function(){\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.have.property(\"id\");\r",
									"    pm.expect(jsonData).to.have.property(\"name\");\r",
									"    pm.expect(jsonData).to.have.property(\"email\");\r",
									"});\r",
									"\r",
									"pm.test(\"User name and email match the sent data\", function(){\r",
									"    const requestData = JSON.parse(pm.request.body.raw);\r",
									"    const responseData= pm.response.json();\r",
									"\r",
									"\r",
									"    pm.expect(responseData.name).to.eql(requestData.name);\r",
									"    pm.expect(responseData.email).to.eql(requestData.email);\r",
									"})\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n\"id\":\"4\",\r\n\"name\":\"TesteQA\",\r\n\"email\":\"testeQa@gmail.com\",\r\n\"password\":\"Teste123%\"\r\n\r\n}\r\n\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Put User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 - User update successfuly\", function(){\r",
									"    pm.response.to.have(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response contains update user data\", function(){\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.have.property(\"id\");\r",
									"     pm.expect(jsonData).to.have.property(\"name\");\r",
									"      pm.expect(jsonData).to.have.property(\"email\");\r",
									"\r",
									"});\r",
									"\r",
									"\r",
									"pm.teste(\"Update fields reflect correctly\", function(){\r",
									"    const requestData = JSON.parse(pm.request.body.raw);\r",
									"    const responseData = pm.response.json();\r",
									"\r",
									"    pm.expect(responseData.name).to.eql(requestData.name);\r",
									"    pm.expect(responseData.email).to.eql(requestData.email);})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n   \r\n    \"name\":\"teste2\",\r\n    \"email\":\"testeAtualizado@gmail.com\",\r\n    \"password\":\"BNovaSenha\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/users/4",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"4"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 204 - User deleted successfuly\", function(){\r",
									"    pm.expect([200,204]).to.include(pm.response.code)\r",
									"});\r",
									"\r",
									"pm.test(\"Response time is under 1000ms\", function(){\r",
									"    pm.expect(pm.response.responseTime).to.be.below(1000)\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n   \r\n    \"name\":\"teste2\",\r\n    \"email\":\"testeAtualizado@gmail.com\",\r\n    \"password\":\"BNovaSenha\"\r\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/4",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"4"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Book",
			"item": [
				{
					"name": "Get Books",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Satus code is 200 - Books listed successfully\", function(){\r",
									"    pm.response.to.have(200);\r",
									"})\r",
									"\r",
									"\r",
									"pm.test(\"Response time is under 1000ms\", function (){\r",
									"    pm.expect(pm.response.responseTime).to.be.below(1000)\r",
									"})\r",
									"\r",
									"pm.test(\"Response body is an array\", function(){\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.be.an(\"array\");\r",
									"})\r",
									"\r",
									"pm.test(\"Each book object contains required fields\", function(){\r",
									"    const jsonData = pm.response.json();\r",
									"    jsonData.forEach(book =>{\r",
									"        pm.expect(book).to.have.property(\"id\");\r",
									"        pm.expect(book).to.have.property(\"title\");\r",
									"        pm.expect(book).to.have.property(\"author\");\r",
									"        pm.expect(book).to.have.property(\"available\")\r",
									"    })\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/books",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"books"
							]
						}
					},
					"response": []
				},
				{
					"name": "Post Books",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201 -  Book Created successfully\", function(){\r",
									"    pm.response.to.have.status(201)\r",
									"});\r",
									"\r",
									"pm.test(\"Response contains created book data\", function(){\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.have.property(\"id\");\r",
									"    pm.expect(jsonData).to.have.property(\"title\");\r",
									"    pm.expect(jsonData).to.have.property(\"author\");\r",
									"    pm.expect(jsonData).to.have.property(\"available\");\r",
									"});\r",
									"\r",
									"pm.test(\"Book data matches the request data\", function(){\r",
									"    const requestData = JSON.parse(pm.request.body.raw);\r",
									"    const responseData = pm.response.json();\r",
									"    pm.expect(responseData.tile).to.eql(requestData.tile);\r",
									"    pm.expect(responseData.tile).to.eql(requestData.author);\r",
									"    pm.expect(responseData.tile).to.eql(requestData.available);\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"id\":\"9\",\r\n    \"title\":\"O Poder do Subconsciente\",\r\n    \"author\":\"Fulano de Tal\",\r\n    \"category\":\"Psicologia\",\r\n    \"avaible\":true\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/books",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"books"
							]
						}
					},
					"response": []
				},
				{
					"name": "Put Books",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 - Book update successfully\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"\r",
									"pm.test(\"Response contains update book data\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.have.property(\"id\");\r",
									"    pm.expect(jsonData).to.have.property(\"title\");\r",
									"    pm.expect(jsonData).to.have.property(\"author\");\r",
									"    pm.expect(jsonData).to.have.property(\"available\");\r",
									"\r",
									"});\r",
									"\r",
									"pm.test(\"Update fields match the request data\", function () {\r",
									"    const requestData = JSON.parse(pm.request.body.raw);\r",
									"    const responseData = pm.response.json();\r",
									"    pm.expect(responseData.title).to.eql(requestData);\r",
									"    pm.expect(responseData.author).to.eql(requestData);\r",
									"    pm.expect(responseData.available).to.eql(requestData.available);\r",
									"\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "    {\r\n      \"title\": \"O Poder do Subconsciente2\",\r\n      \"author\": \"Fulano de Tal2\",\r\n      \"category\": \"Psicologia\",\r\n      \"avaible\": true\r\n    }",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/books/9",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"books",
								"9"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Books",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 204 - Book deleted successfully\", function () {\r",
									"    pm.expect([200, 204]).to.include(pm.response.code);\r",
									"})\r",
									"\r",
									"pm.test(\"Response time is under 1000ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(1000);\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/books/9",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"books",
								"9"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Reservation",
			"item": [
				{
					"name": "Get Reservations",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 - Reservations listed succesfully\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"})\r",
									"\r",
									"pm.test(\"Response time is under 1000ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(1000);\r",
									"})\r",
									"\r",
									"pm.test(\"Response body is an array\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.be.an(\"array\")\r",
									"});\r",
									"\r",
									"pm.test(\"each reservation contains required fields\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    jsonData.forEach(reservation => {\r",
									"        pm.expect(reservation).to.have.property(\"id\");\r",
									"        pm.expect(reservation).to.have.property(\"userId\");\r",
									"        pm.expect(reservation).to.have.property(\"bookId\");\r",
									"        pm.expect(reservation).to.have.property(\"status\");\r",
									"        pm.expect(reservation).to.have.property(\"date\");\r",
									"    })\r",
									"})"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/reservations",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reservations"
							]
						}
					},
					"response": []
				},
				{
					"name": "Post Reservations",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201 - Reservation created successfully\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"pm.test(\"Response contains reservation data\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.have.property(\"id\");\r",
									"    pm.expect(jsonData).to.have.property(\"userId\");\r",
									"    pm.expect(jsonData).to.have.property(\"bookId\");\r",
									"    pm.expect(jsonData).to.have.property(\"status\");\r",
									"    pm.expect(jsonData).to.have.property(\"date\");\r",
									"});\r",
									"\r",
									"pm.test(\"Reservation data matches sent data\", function () {\r",
									"    const requestData = JSON.parse(pm.request.body.raw);\r",
									"    const responseData = pm.response.json();\r",
									"    pm.expect(responseData.userId).to.eql(requestData.userId);\r",
									"    pm.expect(responseData.bookId).to.eql(requestData.bookId);\r",
									"    pm.expect(responseData.status).to.eql(requestData.status);\r",
									"});\r",
									"\r",
									"// Save reservation ID for future tests\r",
									"const jsonData = pm.response.json();\r",
									"pm.environment.set(\"reservation_id\", jsonData.id);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"id\":\"5\",\r\n    \"userId\":3,\r\n    \"bookId\":9,\r\n    \"status\":\"concluÃ­da\",\r\n    \"date\":\"2025-11-12\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/reservations",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reservations"
							]
						}
					},
					"response": []
				},
				{
					"name": "Put Reservation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 - Reservation updated successfully\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response contains updated reservation data\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.have.property(\"id\");\r",
									"    pm.expect(jsonData).to.have.property(\"userId\");\r",
									"    pm.expect(jsonData).to.have.property(\"bookId\");\r",
									"    pm.expect(jsonData).to.have.property(\"status\");\r",
									"});\r",
									"\r",
									"pm.test(\"Updated fields match request data\", function () {\r",
									"    const requestData = JSON.parse(pm.request.body.raw);\r",
									"    const responseData = pm.response.json();\r",
									"    pm.expect(responseData.status).to.eql(requestData.status);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"userId\":3,\r\n    \"bookId\":9,\r\n    \"status\":\"Em Andamento\",\r\n    \"date\":\"2025-11-12\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/reservations/5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reservations",
								"5"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Reservation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 204 - Reservation deleted successfully\", function () {\r",
									"    pm.expect([200, 204]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Response time is under 1000ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(1000);\r",
									"});\r",
									"\r",
									"// Optional: check if reservation was deleted\r",
									"pm.sendRequest({\r",
									"    url: pm.environment.get(\"base_url\") + \"/reservations/\" + pm.environment.get(\"reservation_id\"),\r",
									"    method: \"GET\"\r",
									"}, function (err, res) {\r",
									"    pm.test(\"Deleted reservation should not be found\", function () {\r",
									"        pm.expect(res.code).to.eql(404);\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/reservations/5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reservations",
								"5"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "History",
			"item": [
				{
					"name": "Get Historys",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 - History listed successfully\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response time is under 1000ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(1000);\r",
									"});\r",
									"\r",
									"pm.test(\"Response body is an array\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"pm.test(\"Each history entry contains required fields\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    jsonData.forEach(entry => {\r",
									"        pm.expect(entry).to.have.property(\"id\");\r",
									"        pm.expect(entry).to.have.property(\"userId\");\r",
									"        pm.expect(entry).to.have.property(\"bookId\");\r",
									"        pm.expect(entry).to.have.property(\"status\");\r",
									"        pm.expect(entry).to.have.property(\"date\");\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/history",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"history"
							]
						}
					},
					"response": []
				},
				{
					"name": "Post History",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201 - History entry created successfully\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"});\r",
									"\r",
									"pm.test(\"Response contains created history data\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.have.property(\"id\");\r",
									"    pm.expect(jsonData).to.have.property(\"userId\");\r",
									"    pm.expect(jsonData).to.have.property(\"bookId\");\r",
									"    pm.expect(jsonData).to.have.property(\"status\");\r",
									"    pm.expect(jsonData).to.have.property(\"date\");\r",
									"});\r",
									"\r",
									"// Save history ID for future tests\r",
									"const jsonData = pm.response.json();\r",
									"pm.environment.set(\"history_id\", jsonData.id);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"id\":\"4\",\r\n    \"userId\":3,\r\n    \"bookTitle\":\"Clean Code\",\r\n    \"status\":\"Inativa\",\r\n    \"date\":\"2023-11-15\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/history",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"history"
							]
						}
					},
					"response": []
				},
				{
					"name": "Put History",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 - History entry updated successfully\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Response contains updated fields\", function () {\r",
									"    const jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.have.property(\"status\");\r",
									"});\r",
									"\r",
									"pm.test(\"Updated status matches request body\", function () {\r",
									"    const requestData = JSON.parse(pm.request.body.raw);\r",
									"    const responseData = pm.response.json();\r",
									"    pm.expect(responseData.status).to.eql(requestData.status);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"id\":\"4\",\r\n    \"userId\":3,\r\n    \"bookTitle\":\"Clean Code\",\r\n    \"status\":\"Em Andamento\",\r\n    \"date\":\"2023-11-15\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/history/4",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"history",
								"4"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete History",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 or 204 - History entry deleted successfully\", function () {\r",
									"    pm.expect([200, 204]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Response time is under 1000ms\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(1000);\r",
									"});\r",
									"\r",
									"\r",
									"pm.sendRequest({\r",
									"    url: pm.environment.get(\"base_url\") + \"/history/\" + pm.environment.get(\"history_id\"),\r",
									"    method: \"GET\"\r",
									"}, function (err, res) {\r",
									"    pm.test(\"Deleted history entry should not exist\", function () {\r",
									"        pm.expect(res.code).to.eql(404);\r",
									"    });\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/history/4",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"history",
								"4"
							]
						}
					},
					"response": []
				}
			]
		}
	]
}